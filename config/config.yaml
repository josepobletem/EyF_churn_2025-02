paths:
  # dataset crudo original (sin target todavía)
  #raw_dataset: "data/raw/competencia_01_crudo.csv"
  #raw_dataset: "data/raw/competencia_02_crudo.csv"
  raw_dataset: "data/raw/competencia_03_crudo_append.parquet"

  # dataset con target churn/class (output de data_prep.py)
  #processed_dataset: "data/processed/competencia_01.csv"
  #processed_dataset: "data/processed/competencia_02.csv"
  #processed_dataset: "gs://jose_poblete_bukito3/eyf/processed/competencia_02.parquet"
  processed_dataset: "gs://jose_poblete_bukito3/eyf/processed/competencia_03.parquet"

  # dataset final con features listo para entrenar (output de feature_engineering.py)
  #feature_dataset: "data/processed/competencia_01_features_new.csv"
  #feature_dataset: "data/processed/competencia_02_features_new.parquet"
  #feature_dataset:   "gs://jose_poblete_bukito3/eyf/features/competencia_02_features_new.parquet"
  #feature_dataset:   "gs://jose_poblete_bukito3/eyf/features/competencia_03_features.parquet"
  feature_dataset:   "gs://jose_poblete_bukito3/eyf/features/competencia_03_features_polar.parquet"
  #feature_dataset:   "gs://jose_poblete_bukito3/eyf/features/competencia_03_features_polar_EM_max_min.parquet"


columns:
  # identificador único del cliente
  id_column: "numero_de_cliente"

  # periodo tipo YYYYMM (por ejemplo 202104)
  period_column: "foto_mes"

  # target creado en data_prep.py: BAJA+1 / BAJA+2 / CONTINUA
  target_column: "clase_ternaria"
  
  # target para el optimizador
  binary_target_col: "clase_binaria2"
  peso_col: "clase_peso"
  binary_target_gan: "clase_binaria1"

logic:
  # Documentación de negocio de churn
  churn_definition: |
    CASE
      WHEN esta_t1 = 0 THEN 'BAJA+1'
      WHEN esta_t1 = 1 AND esta_t2 = 0 THEN 'BAJA+2'
      ELSE 'CONTINUA'
    END
  time_granularity: "mes"

features:
  # nombre con el que vamos a registrar el dataset base en DuckDB
  # (es el processed_dataset leído por Python)
  base_table_name: "base_clientes"

  # orden de ejecución de los SQL
  steps:
    - "sql/01_base_tables.sql"
    - "sql/02_feat_numeric.sql"
    - "sql/03_final_model.sql"
    - "sql/04_risk_behavior_and_join.sql"
    - "sql/05_behavioral_features.sql"

train:
  # ya los tenías (pueden quedar aunque no se usen aquí)
  n_models: 50
  seed: 12345
  seeds: [464939, 782911, 213713, 811157, 502717,
          736421, 592889, 463301, 889147, 219787,
          713409, 982331, 627519, 854773, 431287,
          918445, 376201, 745691, 269553, 1009,
          804221, 912557, 664981, 335729, 589043,
          721843, 477119, 839467, 909311, 552883,
          934211, 128993, 671521, 347899, 558913,
          203, 307, 409, 503, 607,
          701, 809, 907, 1103, 1201,
          1301, 1409, 1501, 1601, 1709,
          1801, 1901, 2003, 101, 915773,
          28455, 638251, 970433, 542719, 881077,
          309641, 752389, 194723, 82651, 46839,
          903227, 255719, 619847, 784203, 331907,
          867541, 592301, 447983, 713521, 988163,
          524197,230101,231019, 675439, 812129, 456701
          ]
  decision_threshold: 0.025

  # ⚙️ NUEVO PARA ESTE SCRIPT DE ZLightGBM CON CANARITOS
  #models_dir: "gs://jose_poblete_bukito3/eyf/zlgbm"  # donde se guardan modelo y árboles
  #kaggle_dir: "gs://jose_poblete_bukito3/eyf/kaggle" # donde se guardan archivos Kaggle

  # Path para bayesinan optimization
  # models_dir: "gs://jose_poblete_bukito3/eyf/models"  

  train_months: [
                 #201907, #Sacar no undersampling
                 #201908, #Sacar no undersampling
                 #201909, #Sacar no undersampling
                 201910, #drift
                 201911, 
                 201912,
                 202001,
                 202002, #zlgbm se saca
                 202003, #zlgbm se saca
                 202004, 
                 202005, 
                 #202006, #drift y outliers
                 #202007, # outliers
                 202008, 
                 202009,
                 202010, 
                 202011,
                 #202012, # outliers
                 202101, 
                 202102,
                 202103,
                 202104,
                 202105,
                 #202106, # HASTA AQUI COMP 02
                 #202107 # Hasta aqui comp 03
                 ]

  future_months: [202107]   # como pide la consigna

  qcanaritos: 20                   # cantidad de canaritos
  experimento: "zlgbm_canarios_v1_comp03"  # sufijo para nombre KA...
  top_n_kaggle: 11500               # cantidad de envíos = 1
